(function(c,b,a,d){Foundation.libs.topbar={name:"topbar",version:"5.5.2",settings:{index:0,start_offset:0,sticky_class:"sticky",custom_back_text:true,back_text:"Back",mobile_show_parent_link:true,is_hover:true,scrolltop:true,sticky_on:"all",dropdown_autoclose:true},init:function(g,h,f){Foundation.inherit(this,"add_custom_rule register_media throttle");var e=this;e.register_media("topbar","foundation-mq-topbar");this.bindings(h,f);e.S("["+this.attr_name()+"]",this.scope).each(function(){var i=c(this),j=i.data(e.attr_name(true)+"-init"),l=e.S("section, .top-bar-section",this);i.data("index",0);var k=i.parent();if(k.hasClass("fixed")||e.is_sticky(i,k,j)){e.settings.sticky_class=j.sticky_class;e.settings.sticky_topbar=i;i.data("height",k.outerHeight());i.data("stickyoffset",k.offset().top)}else{i.data("height",i.outerHeight())}if(!j.assembled){e.assemble(i)}if(j.is_hover){e.S(".has-dropdown",i).addClass("not-click")}else{e.S(".has-dropdown",i).removeClass("not-click")}e.add_custom_rule(".f-topbar-fixed { padding-top: "+i.data("height")+"px }");if(k.hasClass("fixed")){e.S("body").addClass("f-topbar-fixed")}})},is_sticky:function(f,j,i){var k=j.hasClass(i.sticky_class);var h=matchMedia(Foundation.media_queries.small).matches;var e=matchMedia(Foundation.media_queries.medium).matches;var g=matchMedia(Foundation.media_queries.large).matches;if(k&&i.sticky_on==="all"){return true}if(k&&this.small()&&i.sticky_on.indexOf("small")!==-1){if(h&&!e&&!g){return true}}if(k&&this.medium()&&i.sticky_on.indexOf("medium")!==-1){if(h&&e&&!g){return true}}if(k&&this.large()&&i.sticky_on.indexOf("large")!==-1){if(h&&e&&g){return true}}return false},toggle:function(e){var g=this,f;if(e){f=g.S(e).closest("["+this.attr_name()+"]")}else{f=g.S("["+this.attr_name()+"]")}var h=f.data(this.attr_name(true)+"-init");var i=g.S("section, .top-bar-section",f);if(g.breakpoint()){if(!g.rtl){i.css({left:"0%"});c(">.name",i).css({left:"100%"})}else{i.css({right:"0%"});c(">.name",i).css({right:"100%"})}g.S("li.moved",i).removeClass("moved");f.data("index",0);f.toggleClass("expanded").css("height","")}if(h.scrolltop){if(!f.hasClass("expanded")){if(f.hasClass("fixed")){f.parent().addClass("fixed");f.removeClass("fixed");g.S("body").addClass("f-topbar-fixed")}}else{if(f.parent().hasClass("fixed")){if(h.scrolltop){f.parent().removeClass("fixed");f.addClass("fixed");g.S("body").removeClass("f-topbar-fixed");b.scrollTo(0,0)}else{f.parent().removeClass("expanded")}}}}else{if(g.is_sticky(f,f.parent(),h)){f.parent().addClass("fixed")}if(f.parent().hasClass("fixed")){if(!f.hasClass("expanded")){f.removeClass("fixed");f.parent().removeClass("expanded");g.update_sticky_positioning()}else{f.addClass("fixed");f.parent().addClass("expanded");g.S("body").addClass("f-topbar-fixed")}}}},timer:null,events:function(g){var e=this,f=this.S;f(this.scope).off(".topbar").on("click.fndtn.topbar","["+this.attr_name()+"] .toggle-topbar",function(h){h.preventDefault();e.toggle(this)}).on("click.fndtn.topbar contextmenu.fndtn.topbar",'.top-bar .top-bar-section li a[href^="#"],['+this.attr_name()+'] .top-bar-section li a[href^="#"]',function(l){var h=c(this).closest("li"),i=h.closest("["+e.attr_name()+"]"),k=i.data(e.attr_name(true)+"-init");if(k.dropdown_autoclose&&k.is_hover){var j=c(this).closest(".hover");j.removeClass("hover")}if(e.breakpoint()&&!h.hasClass("back")&&!h.hasClass("has-dropdown")){e.toggle()}}).on("click.fndtn.topbar","["+this.attr_name()+"] li.has-dropdown",function(l){var h=f(this),k=f(l.target),i=h.closest("["+e.attr_name()+"]"),j=i.data(e.attr_name(true)+"-init");if(k.data("revealId")){e.toggle();return}if(e.breakpoint()){return}if(j.is_hover&&!Modernizr.touch){return}l.stopImmediatePropagation();if(h.hasClass("hover")){h.removeClass("hover").find("li").removeClass("hover");h.parents("li.hover").removeClass("hover")}else{h.addClass("hover");c(h).siblings().removeClass("hover");if(k[0].nodeName==="A"&&k.parent().hasClass("has-dropdown")){l.preventDefault()}}}).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown>a",function(m){if(e.breakpoint()){m.preventDefault();var l=f(this),i=l.closest("["+e.attr_name()+"]"),k=i.find("section, .top-bar-section"),j=l.next(".dropdown").outerHeight(),h=l.closest("li");i.data("index",i.data("index")+1);h.addClass("moved");if(!e.rtl){k.css({left:-(100*i.data("index"))+"%"});k.find(">.name").css({left:100*i.data("index")+"%"})}else{k.css({right:-(100*i.data("index"))+"%"});k.find(">.name").css({right:100*i.data("index")+"%"})}i.css("height",l.siblings("ul").outerHeight(true)+i.data("height"))}});f(b).off(".topbar").on("resize.fndtn.topbar",e.throttle(function(){e.resize.call(e)},50)).trigger("resize.fndtn.topbar").load(function(){f(this).trigger("resize.fndtn.topbar")});f("body").off(".topbar").on("click.fndtn.topbar",function(i){var h=f(i.target).closest("li").closest("li.hover");if(h.length>0){return}f("["+e.attr_name()+"] li.hover").removeClass("hover")});f(this.scope).on("click.fndtn.topbar","["+this.attr_name()+"] .has-dropdown .back",function(n){n.preventDefault();var m=f(this),i=m.closest("["+e.attr_name()+"]"),l=i.find("section, .top-bar-section"),k=i.data(e.attr_name(true)+"-init"),j=m.closest("li.moved"),h=j.parent();i.data("index",i.data("index")-1);if(!e.rtl){l.css({left:-(100*i.data("index"))+"%"});l.find(">.name").css({left:100*i.data("index")+"%"})}else{l.css({right:-(100*i.data("index"))+"%"});l.find(">.name").css({right:100*i.data("index")+"%"})}if(i.data("index")===0){i.css("height","")}else{i.css("height",h.outerHeight(true)+i.data("height"))}setTimeout(function(){j.removeClass("moved")},300)});f(this.scope).find(".dropdown a").focus(function(){c(this).parents(".has-dropdown").addClass("hover")}).blur(function(){c(this).parents(".has-dropdown").removeClass("hover")})},resize:function(){var e=this;e.S("["+this.attr_name()+"]").each(function(){var g=e.S(this),i=g.data(e.attr_name(true)+"-init");var h=g.parent("."+e.settings.sticky_class);var j;if(!e.breakpoint()){var f=g.hasClass("expanded");g.css("height","").removeClass("expanded").find("li").removeClass("hover");if(f){e.toggle(g)}}if(e.is_sticky(g,h,i)){if(h.hasClass("fixed")){h.removeClass("fixed");j=h.offset().top;if(e.S(a.body).hasClass("f-topbar-fixed")){j-=g.data("height")}g.data("stickyoffset",j);h.addClass("fixed")}else{j=h.offset().top;g.data("stickyoffset",j)}}})},breakpoint:function(){return !matchMedia(Foundation.media_queries.topbar).matches},small:function(){return matchMedia(Foundation.media_queries.small).matches},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},assemble:function(f){var e=this,g=f.data(this.attr_name(true)+"-init"),h=e.S("section, .top-bar-section",f);h.detach();e.S(".has-dropdown>a",h).each(function(){var i=e.S(this),l=i.siblings(".dropdown"),j=i.attr("href"),k;if(!l.find(".title.back").length){if(g.mobile_show_parent_link==true&&j){k=c('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5></li><li class="parent-link hide-for-medium-up"><a class="parent-link js-generated" href="'+j+'">'+i.html()+"</a></li>")}else{k=c('<li class="title back js-generated"><h5><a href="javascript:void(0)"></a></h5>')}if(g.custom_back_text==true){c("h5>a",k).html(g.back_text)}else{c("h5>a",k).html("&laquo; "+i.html())}l.prepend(k)}});h.appendTo(f);this.sticky();this.assembled(f)},assembled:function(e){e.data(this.attr_name(true),c.extend({},e.data(this.attr_name(true)),{assembled:true}))},height:function(f){var g=0,e=this;c("> li",f).each(function(){g+=e.S(this).outerHeight(true)});return g},sticky:function(){var e=this;this.S(b).on("scroll",function(){e.update_sticky_positioning()})},update_sticky_positioning:function(){var e="."+this.settings.sticky_class,g=this.S(b),f=this;if(f.settings.sticky_topbar&&f.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(),this.settings)){var h=this.settings.sticky_topbar.data("stickyoffset")+this.settings.start_offset;if(!f.S(e).hasClass("expanded")){if(g.scrollTop()>(h)){if(!f.S(e).hasClass("fixed")){f.S(e).addClass("fixed");f.S("body").addClass("f-topbar-fixed")}}else{if(g.scrollTop()<=h){if(f.S(e).hasClass("fixed")){f.S(e).removeClass("fixed");f.S("body").removeClass("f-topbar-fixed")}}}}}},off:function(){this.S(this.scope).off(".fndtn.topbar");this.S(b).off(".fndtn.topbar")},reflow:function(){}}}(jQuery,window,window.document));